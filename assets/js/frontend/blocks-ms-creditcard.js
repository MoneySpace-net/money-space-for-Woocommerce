(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,a=window.wp.htmlEntities,r=window.wc.wcBlocksRegistry,c=window.wp.element,o=window.wp.i18n,n="moneyspace",l=(0,t.getSetting)(`${n}_data`,{}),d=(0,a.decodeEntities)(l.title),i={name:n,label:(0,e.createElement)((({components:t,title:a,icons:r,id:c})=>{Array.isArray(r)||(r=[r]);const{PaymentMethodLabel:o,PaymentMethodIcons:n}=t;return(0,e.createElement)("div",{className:`wc-moneyspace-blocks-payment-method__label ${c}`},(0,e.createElement)(o,{text:a}),(0,e.createElement)(n,{icons:r}))}),{id:n,title:d,icons:l.icons}),content:(0,e.createElement)((t=>{const a={ccNo:"",ccName:"",ccExpMonth:"",ccExpYear:"",ccCVV:"",cardYear:"",minCardYear:(new Date).getFullYear()};console.log("props",t);const{isComplete:r}=t.checkoutStatus,{onCheckoutValidationBeforeProcessing:n}=t.eventRegistration;var l=!1;null!==document.getElementById("radio-control-wc-payment-method-options-moneyspace")&&(l=document.getElementById("radio-control-wc-payment-method-options-moneyspace").checked);const[d,i]=(0,c.useState)(a),s=[1,2,3,4,5,6,7,8,9,10,11,12];(({formData:e,onCheckoutValidationBeforeProcessing:t})=>{(0,c.useEffect)((()=>t((()=>{console.log("!formData?.ccNo",e,!e?.ccNo);var t=!1,a=[];return e?.ccNo||(a=[(0,o.__)("Please fill in Card Number before placing your order.","moneyspace-woocommerce"),"<br/>",...a],t=!0),e?.ccName||(a=[(0,o.__)("Please fill in Card Holder before placing your order.","moneyspace-woocommerce"),"<br/>",...a],t=!0),e?.ccExpMonth||(a=[(0,o.__)("Please fill in Exp Month before placing your order.","moneyspace-woocommerce"),"<br/>",...a],t=!0),e?.ccExpYear||(a=[(0,o.__)("Please fill in Exp Year before placing your order.","moneyspace-woocommerce"),"<br/>",...a],t=!0),e?.ccCVV||(a=[(0,o.__)("Please fill in CVV before placing your order.","moneyspace-woocommerce"),"<br/>",...a],t=!0),!t||{errorMessage:String.prototype.concat(...a)}}))),[e])})({formData:d,onCheckoutValidationBeforeProcessing:n});const m=e=>{for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),a=t&&t[0]||"",r=[],c=0,o=a.length;c<o;c+=4)r.push(a.substring(c,c+4));return r.length?r.join(" "):e},p=e=>t=>{i("ccNo"==e?{...d,[e]:m(t.target.value)}:"ccName"==e?{...d,[e]:t.target.value.toUpperCase()}:{...d,[e]:t.target.value})};return r?null:(0,e.createElement)("div",{class:"container ms-box",id:"credit-card-form"},(0,e.createElement)("div",{class:"card"},(0,e.createElement)("div",{class:"card-body"},(0,e.createElement)("div",null,(0,e.createElement)("input",{type:"hidden",id:"mspay",name:"mspay"}),(0,e.createElement)("div",{class:"form-group"},(0,e.createElement)("label",{for:"txtCardNumber"},"Card Number ",(0,e.createElement)("abbr",{class:"required",title:"required"},"*")),(0,e.createElement)("input",{type:"text",class:"form-control",value:d.ccNo,onChange:p("ccNo"),id:"txtCardNumber",name:"cardNumber",required:"validateCardNumber()",onKeyDown:e=>/^[0-9]*$/.test(e.key)||8==e.keyCode?d.ccNo.replaceAll(" ","").length>=16&&8!=e.keyCode?e.preventDefault():void 0:e.preventDefault(),placeholder:"0000 0000 0000 0000"})),(0,e.createElement)("div",{class:"form-group"},(0,e.createElement)("label",{for:"txtHolder"},"Card Holder ",(0,e.createElement)("abbr",{class:"required",title:"required"},"*")),(0,e.createElement)("input",{type:"text",class:"form-control",value:d.ccName,onChange:p("ccName"),id:"txtHolder",name:"cardHolder",required:"validateCardHolder()",keypress:"checkCardName",placeholder:"TONY ELSDEN"})),(0,e.createElement)("div",{class:"row"},(0,e.createElement)("div",{class:"col-md-6"},(0,e.createElement)("div",{class:"form-group"},(0,e.createElement)("label",{for:"txtExpDate"},"Exp Date ",(0,e.createElement)("abbr",{class:"required",title:"required"},"*")),(0,e.createElement)("div",{class:"input-group"},(0,e.createElement)("select",{value:d.ccExpMonth,onChange:p("ccExpMonth"),id:"txtExpDate",name:"cardExpDate",class:"form-control",required:"validateCardExpDate()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),s.map((t=>(0,e.createElement)("option",{value:t,disabled:t<(a.cardYear===a.minCardYear?(new Date).getMonth()+1:1)},t<10?"0"+t:t)))),(0,e.createElement)("select",{value:d.ccExpYear,onChange:p("ccExpYear"),id:"txtExpDateYear",name:"cardExpDateYear",class:"form-control",required:"validateCardExpYear()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Year"),s.map(((t,a)=>(0,e.createElement)("option",{value:a+d.minCardYear},a+d.minCardYear))))))),(0,e.createElement)("div",{class:"col-md-6"},(0,e.createElement)("div",{class:"form-group"},(0,e.createElement)("label",{for:"txtCVV"},"CVV ",(0,e.createElement)("abbr",{class:"required",title:"required"},"*")),(0,e.createElement)("input",{type:"password",class:"form-control",value:d.ccCVV,onChange:p("ccCVV"),id:"txtCVV",name:"cardCVV",maxLength:3,onKeyDown:e=>{if(!/^[0-9]*$/.test(e.key)&&8!=e.keyCode)return e.preventDefault()},placeholder:"000",required:!(0!=d.ccCVV.length||!l)}))))))))}),null),edit:(0,e.createElement)((()=>(0,a.decodeEntities)(l.description||"")),null),ariaLabel:d,paymentMethodId:n,canMakePayment:()=>!0,supports:{features:l.supports}};(0,r.registerPaymentMethod)(i)})();