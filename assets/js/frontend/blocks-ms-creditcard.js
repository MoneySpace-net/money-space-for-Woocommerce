(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,c=window.wp.htmlEntities,a=window.wc.wcBlocksRegistry,r=window.wp.element,n=(window.wp.i18n,t=>{const c={ccNo:"",ccName:"",ccExpMonth:"",ccExpYear:"",ccCVV:"",cardYear:"",minCardYear:(new Date).getFullYear(),dirty:!1};var a=!1,n=[];const o=[1,2,3,4,5,6,7,8,9,10,11,12],[l,d]=(0,r.useState)(c),{eventRegistration:i={},i18n:m={}}=t,{onPaymentSetup:p,onCheckoutValidation:s}=i;null!==document.getElementById("radio-control-wc-payment-method-options-moneyspace")&&(a=document.getElementById("radio-control-wc-payment-method-options-moneyspace").checked),(({formData:e,onPaymentSetup:t})=>{(0,r.useEffect)((()=>{if(t)return t((()=>e))}),[e,t])})({formData:l,onPaymentSetup:p}),(({formData:e,onPaymentSetup:t})=>{(0,r.useEffect)((()=>{if(t)return t((()=>({type:"success",meta:{paymentMethodData:{cardNumber:e.ccNo.replaceAll(" ",""),cardHolder:e.ccName,cardExpDate:e.ccExpMonth,cardExpDateYear:e.ccExpYear,cardCVV:e.ccCVV}},paymentMethodData:{cardNumber:e.ccNo.replaceAll(" ",""),cardHolder:e.ccName,cardExpDate:e.ccExpMonth,cardExpDateYear:e.ccExpYear,cardCVV:e.ccCVV}})))}),[e,t])})({formData:l,onPaymentSetup:p}),(({formData:e,onCheckoutValidation:t},c)=>{(0,r.useEffect)((()=>{if(t)return t((()=>0==e.dirty?(d({...e,dirty:!0}),{errorMessage:"Please fill in Pay by Card 3D secured section before placing your order."}):!(Object.keys(c).length>0)||{errorMessage:"Please check Pay by Card 3D secured section before placing your order."}))}),[e,t])})({formData:l,onCheckoutValidation:s},n);const C=e=>"ccNo"==e&&l[e].replaceAll(" ","").length<16&&1==l.dirty||"ccCVV"==e&&l[e].length<3&&1==l.dirty||""==l[e]&&1==l.dirty?"has-error":"",u=(e,t)=>""==l[e]&&1==l.dirty?(n[e]=t,E(t)):"",E=t=>(0,e.createElement)("div",{class:"wc-block-components-validation-error",role:"alert"},(0,e.createElement)("p",null,t)),N=e=>{for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),c=t&&t[0]||"",a=[],r=0,n=c.length;r<n;r+=4)a.push(c.substring(r,r+4));return a.length?a.join(" "):e},y=e=>t=>{"ccNo"==e?/^[0-9]*$/.test(t.target.value.toString().replaceAll(" ",""))&&d({...l,[e]:N(t.target.value),dirty:!0}):d("ccName"==e?{...l,[e]:t.target.value.toUpperCase(),dirty:!0}:{...l,[e]:t.target.value,dirty:!0})};return(0,e.createElement)("div",{className:"wc-block-components-credit-card-form"},(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${C("ccNo")}`},(0,e.createElement)("input",{type:"text",value:l.ccNo,onChange:y("ccNo"),id:"txtCardNumber",name:"cardNumber",onKeyDown:e=>/^[0-9]*$/.test(e.key)||[8,67,86,88].includes(e.keyCode)?l.ccNo.replaceAll(" ","").length>=16&&![8,67,86,88].includes(e.keyCode)?e.preventDefault():void 0:e.preventDefault(),placeholder:"0000 0000 0000 0000"}),(0,e.createElement)("label",{for:"creditCard"},m.MNS_CC_NO," *"),u("ccNo",m.MNS_CC_WARN_CC_NO_1),(_="ccNo",h=m.MNS_CC_WARN_CC_NO_2,l[_].replaceAll(" ","").length<16&&l[_].replaceAll(" ","").length>0&&1==l.dirty?(n[_]=h,E(h)):"")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${C("ccName")}`},(0,e.createElement)("input",{type:"text",value:l.ccName,onChange:y("ccName"),id:"txtHolder",name:"cardHolder",keypress:"checkCardName",placeholder:"TONY ELSDEN"}),(0,e.createElement)("label",{for:"cardHolder"},m.MNS_CC_NAME," *"),u("ccName",m.MNS_CC_WARN_CC_NAME)),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${C("ccExpMonth")}`},(0,e.createElement)("select",{value:l.ccExpMonth,onChange:y("ccExpMonth"),id:"txtExpDate",name:"cardExpDate"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},m.MNS_MONTH),o.map((t=>(0,e.createElement)("option",{value:t,disabled:t<(c.cardYear===c.minCardYear?(new Date).getMonth()+1:1)},t<10?"0"+t:t)))),(0,e.createElement)("label",{for:"ccExpMonth"},m.MNS_CC_EXP_MONTH," *"),u("ccExpMonth",m.MNS_CC_WARN_CC_EXP_MONTH)),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${C("ccExpYear")}`},(0,e.createElement)("select",{value:l.ccExpYear,onChange:y("ccExpYear"),id:"ccExpYear",name:"cardExpDateYear"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},m.MNS_YEAR),o.map(((t,c)=>(0,e.createElement)("option",{value:c+l.minCardYear},c+l.minCardYear)))),(0,e.createElement)("label",{for:"ccExpYear"},m.MNS_CC_EXP_YEAR," *"),u("ccExpYear",m.MNS_CC_WARN_CC_EXP_YEAR)),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${C("ccCVV")}`},(0,e.createElement)("input",{type:"password",value:l.ccCVV,onChange:y("ccCVV"),id:"txtCVV",name:"cardCVV",maxLength:3,onKeyDown:e=>{if(!/^[0-9]*$/.test(e.key)&&![8,67,86,88].includes(e.keyCode))return e.preventDefault()},placeholder:"000",required:!(0!=l.ccCVV.length||!a)}),(0,e.createElement)("label",{for:"cardCVV"},m.MNS_CC_CVV," *"),u("ccCVV",m.MNS_CC_WARN_CVV_1),((e,t)=>l[e].length<3&&l[e].length>0&&1==l.dirty?(n[e]=t,E(t)):"")("ccCVV",m.MNS_CC_WARN_CVV_2)));var _,h}),o="moneyspace",l=(0,t.getSetting)(`${o}_data`,{}),d=(0,c.decodeEntities)(l.title),i=l.ms_template_payment,m=t=>{const a=(0,r.useMemo)((()=>({i18n:l.i18n,...t})),[t]);return 1==i?(0,e.createElement)(n,{...a}):(0,c.decodeEntities)(l.description||"")},p={name:o,label:d,content:(0,e.createElement)(m,null),edit:(0,e.createElement)(m,null),ariaLabel:d,paymentMethodId:o,canMakePayment:()=>!0,supports:{features:l.supports}};(0,a.registerPaymentMethod)(p)})();