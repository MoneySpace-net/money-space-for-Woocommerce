(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,c=window.wp.htmlEntities,a=window.wc.wcBlocksRegistry,o=window.wp.element,r=window.wp.i18n,n="moneyspace",l=(0,t.getSetting)(`${n}_data`,{}),i=(0,c.decodeEntities)(l.title),d={name:n,label:(0,e.createElement)((({components:t,title:c,icons:a,id:o})=>{Array.isArray(a)||(a=[a]);const{PaymentMethodLabel:r,PaymentMethodIcons:n}=t;return(0,e.createElement)("div",{className:`wc-moneyspace-blocks-payment-method__label ${o}`},(0,e.createElement)(r,{text:c}),(0,e.createElement)(n,{icons:a}))}),{id:n,title:i,icons:l.icons}),content:(0,e.createElement)((t=>{const c={ccNo:"",ccName:"",ccExpMonth:"",ccExpYear:"",ccCVV:"",cardYear:"",minCardYear:(new Date).getFullYear(),dirty:!1};console.log("props",t);const{isComplete:a}=t.checkoutStatus,{ValidationInputError:n}=t.components,{onCheckoutValidationBeforeProcessing:l}=t.eventRegistration;var i=!1;null!==document.getElementById("radio-control-wc-payment-method-options-moneyspace")&&(i=document.getElementById("radio-control-wc-payment-method-options-moneyspace").checked);const d=e=>(console.log("formData[fieldName]",typeof m[e],m.dirty),""==m[e]&&1==m.dirty?"has-error":""),s=(t,c)=>(console.log("formData.dirty",m),""==m[t]&&1==m.dirty?(0,e.createElement)("div",{class:"wc-block-components-validation-error",role:"alert"},(0,e.createElement)("p",null,c)):"");console.log("ValidationInputError",n);const[m,p]=(0,o.useState)(c),u=[1,2,3,4,5,6,7,8,9,10,11,12];(({formData:e,onCheckoutValidationBeforeProcessing:t})=>{(0,o.useEffect)((()=>t((()=>{console.log("!formData?.ccNo",e,!e?.ccNo);var t=!1,c=[];return console.log("arrMessage",c),e?.ccNo||(c=[(0,r.__)("Please fill in Card Number before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccName||(c=[(0,r.__)("Please fill in Card Holder before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccExpMonth||(c=[(0,r.__)("Please fill in Exp Month before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccExpYear||(c=[(0,r.__)("Please fill in Exp Year before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccCVV||(c=[(0,r.__)("Please fill in CVV before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),!t||{errorMessage:String.prototype.concat(...c)}}))),[e])})({formData:m,onCheckoutValidationBeforeProcessing:l});const E=e=>{for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),c=t&&t[0]||"",a=[],o=0,r=c.length;o<r;o+=4)a.push(c.substring(o,o+4));return a.length?a.join(" "):e},y=e=>t=>{p("ccNo"==e?{...m,[e]:E(t.target.value),dirty:!0}:"ccName"==e?{...m,[e]:t.target.value.toUpperCase(),dirty:!0}:{...m,[e]:t.target.value,dirty:!0})};return(0,e.createElement)("div",{className:"wc-block-components-credit-card-form"},(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${d("ccNo")}`},(0,e.createElement)("input",{type:"text",value:m.ccNo,onChange:y("ccNo"),id:"txtCardNumber",name:"cardNumber",required:"validateCardNumber()",onKeyDown:e=>/^[0-9]*$/.test(e.key)||8==e.keyCode?m.ccNo.replaceAll(" ","").length>=16&&8!=e.keyCode?e.preventDefault():void 0:e.preventDefault(),placeholder:"0000 0000 0000 0000"}),(0,e.createElement)("label",{for:"creditCard"},"Card Number *"),s("ccNo","Please fill in Card Number")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${d("ccName")}`},(0,e.createElement)("input",{type:"text",value:m.ccName,onChange:y("ccName"),id:"txtHolder",name:"cardHolder",required:"validateCardHolder()",keypress:"checkCardName",placeholder:"TONY ELSDEN"}),(0,e.createElement)("label",{for:"cardHolder"},"Card Holder *"),s("ccName","Please fill in Card Holder")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${d("ccExpMonth")}`},(0,e.createElement)("select",{value:m.ccExpMonth,onChange:y("ccExpMonth"),id:"txtExpDate",name:"cardExpDate",required:"validateCardExpDate()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),u.map((t=>(0,e.createElement)("option",{value:t,disabled:t<(c.cardYear===c.minCardYear?(new Date).getMonth()+1:1)},t<10?"0"+t:t)))),(0,e.createElement)("label",{for:"ccExpMonth"},"Exp Month *"),s("ccExpMonth","Please fill in Exp Month")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${d("ccExpYear")}`},(0,e.createElement)("select",{value:m.ccExpYear,onChange:y("ccExpYear"),id:"ccExpYear",name:"ccExpYear",required:"validateCardExpYear()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),u.map(((t,c)=>(0,e.createElement)("option",{value:c+m.minCardYear},c+m.minCardYear)))),(0,e.createElement)("label",{for:"ccExpYear"},"Exp Year *"),s("ccExpYear","Please fill in Card Exp Year")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${d("ccCVV")}`},(0,e.createElement)("input",{type:"password",value:m.ccCVV,onChange:y("ccCVV"),id:"txtCVV",name:"cardCVV",maxLength:3,onKeyDown:e=>{if(!/^[0-9]*$/.test(e.key)&&8!=e.keyCode)return e.preventDefault()},placeholder:"000",required:!(0!=m.ccCVV.length||!i)}),(0,e.createElement)("label",{for:"cardCVV"},"CVV *"),s("ccCVV","Please fill in CVV")))}),null),edit:(0,e.createElement)((()=>(0,c.decodeEntities)(l.description||"")),null),ariaLabel:i,paymentMethodId:n,canMakePayment:()=>!0,supports:{features:l.supports}};(0,a.registerPaymentMethod)(d)})();