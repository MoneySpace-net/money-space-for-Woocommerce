(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,c=window.wp.htmlEntities,a=window.wc.wcBlocksRegistry,o=window.wp.element,r=window.wp.i18n,n="moneyspace",l=(0,t.getSetting)(`${n}_data`,{}),i=(0,c.decodeEntities)(l.title),d={name:n,label:(0,e.createElement)((({components:t,title:c,icons:a,id:o})=>{Array.isArray(a)||(a=[a]);const{PaymentMethodLabel:r,PaymentMethodIcons:n}=t;return(0,e.createElement)("div",{className:`wc-moneyspace-blocks-payment-method__label ${o}`},(0,e.createElement)(r,{text:c}),(0,e.createElement)(n,{icons:a}))}),{id:n,title:i,icons:l.icons}),content:(0,e.createElement)((t=>{const c={ccNo:"",ccName:"",ccExpMonth:"",ccExpYear:"",ccCVV:"",cardYear:"",minCardYear:(new Date).getFullYear(),dirty:!1},[a,n]=(0,o.useState)(c);var l=[];console.log("props",t);const{isComplete:i}=t.checkoutStatus,{ValidationInputError:d}=t.components,{onCheckoutValidationBeforeProcessing:s}=t.eventRegistration;var m=!1;null!==document.getElementById("radio-control-wc-payment-method-options-moneyspace")&&(m=document.getElementById("radio-control-wc-payment-method-options-moneyspace").checked);const p=e=>""==a[e]&&1==a.dirty?"has-error":"",u=(t,c)=>""==a[t]&&1==a.dirty?(l[t]=c,console.log("errorFields",l),(0,e.createElement)("div",{class:"wc-block-components-validation-error",role:"alert"},(0,e.createElement)("p",null,c))):"",E=[1,2,3,4,5,6,7,8,9,10,11,12];(({formData:e,onCheckoutValidationBeforeProcessing:t})=>{(0,o.useEffect)((()=>t((()=>{console.log("!formData?.ccNo",e,!e?.ccNo);var t=!1,c=[];return console.log("arrMessage",c),e?.ccNo||(c=[(0,r.__)("Please fill in Card Number before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccName||(c=[(0,r.__)("Please fill in Card Holder before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccExpMonth||(c=[(0,r.__)("Please fill in Exp Month before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccExpYear||(c=[(0,r.__)("Please fill in Exp Year before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),e?.ccCVV||(c=[(0,r.__)("Please fill in CVV before placing your order.","moneyspace-woocommerce"),"<br/>",...c],t=!0),!t||{errorMessage:String.prototype.concat(...c)}}))),[e])})({formData:a,onCheckoutValidationBeforeProcessing:s});const y=e=>{for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),c=t&&t[0]||"",a=[],o=0,r=c.length;o<r;o+=4)a.push(c.substring(o,o+4));return a.length?a.join(" "):e},C=e=>t=>{n("ccNo"==e?{...a,[e]:y(t.target.value),dirty:!0}:"ccName"==e?{...a,[e]:t.target.value.toUpperCase(),dirty:!0}:{...a,[e]:t.target.value,dirty:!0})};return(0,e.createElement)("div",{className:"wc-block-components-credit-card-form"},(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccNo")}`},(0,e.createElement)("input",{type:"text",value:a.ccNo,onChange:C("ccNo"),id:"txtCardNumber",name:"cardNumber",required:"validateCardNumber()",onKeyDown:e=>/^[0-9]*$/.test(e.key)||8==e.keyCode?a.ccNo.replaceAll(" ","").length>=16&&8!=e.keyCode?e.preventDefault():void 0:e.preventDefault(),placeholder:"0000 0000 0000 0000"}),(0,e.createElement)("label",{for:"creditCard"},"Card Number *"),u("ccNo","Please fill in Card Number")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccName")}`},(0,e.createElement)("input",{type:"text",value:a.ccName,onChange:C("ccName"),id:"txtHolder",name:"cardHolder",required:"validateCardHolder()",keypress:"checkCardName",placeholder:"TONY ELSDEN"}),(0,e.createElement)("label",{for:"cardHolder"},"Card Holder *"),u("ccName","Please fill in Card Holder")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${p("ccExpMonth")}`},(0,e.createElement)("select",{value:a.ccExpMonth,onChange:C("ccExpMonth"),id:"txtExpDate",name:"cardExpDate",required:"validateCardExpDate()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),E.map((t=>(0,e.createElement)("option",{value:t,disabled:t<(c.cardYear===c.minCardYear?(new Date).getMonth()+1:1)},t<10?"0"+t:t)))),(0,e.createElement)("label",{for:"ccExpMonth"},"Exp Month *"),u("ccExpMonth","Please fill in Exp Month")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${p("ccExpYear")}`},(0,e.createElement)("select",{value:a.ccExpYear,onChange:C("ccExpYear"),id:"ccExpYear",name:"ccExpYear",required:"validateCardExpYear()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),E.map(((t,c)=>(0,e.createElement)("option",{value:c+a.minCardYear},c+a.minCardYear)))),(0,e.createElement)("label",{for:"ccExpYear"},"Exp Year *"),u("ccExpYear","Please fill in Card Exp Year")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccCVV")}`},(0,e.createElement)("input",{type:"password",value:a.ccCVV,onChange:C("ccCVV"),id:"txtCVV",name:"cardCVV",maxLength:3,onKeyDown:e=>{if(!/^[0-9]*$/.test(e.key)&&8!=e.keyCode)return e.preventDefault()},placeholder:"000",required:!(0!=a.ccCVV.length||!m)}),(0,e.createElement)("label",{for:"cardCVV"},"CVV *"),u("ccCVV","Please fill in CVV")))}),null),edit:(0,e.createElement)((()=>(0,c.decodeEntities)(l.description||"")),null),ariaLabel:i,paymentMethodId:n,canMakePayment:()=>!0,supports:{features:l.supports}};(0,a.registerPaymentMethod)(d)})();