(()=>{"use strict";const e=window.React,t=window.wc.wcSettings,a=window.wp.htmlEntities,c=window.wc.wcBlocksRegistry,r=window.wp.element,n=(window.wp.i18n,t=>{const a={ccNo:"",ccName:"",ccExpMonth:"",ccExpYear:"",ccCVV:"",cardYear:"",minCardYear:(new Date).getFullYear(),dirty:!1};var c=!1,n=[];const o=[1,2,3,4,5,6,7,8,9,10,11,12];console.log("props",t);const[l,i]=(0,r.useState)(a),{onPaymentSetup:d,onPaymentProcessing:s,onCheckoutValidationBeforeProcessing:m}=t.eventRegistration;null!==document.getElementById("radio-control-wc-payment-method-options-moneyspace")&&(c=document.getElementById("radio-control-wc-payment-method-options-moneyspace").checked),(({formData:e,onPaymentSetup:t})=>{(0,r.useEffect)((()=>t((()=>e))),[e])})({formData:l,onPaymentSetup:d}),(({formData:e,onPaymentProcessing:t})=>{(0,r.useEffect)((()=>t((()=>({type:"success",meta:{paymentMethodData:{cardNumber:e.ccNo.replaceAll(" ",""),cardHolder:e.ccName,cardExpDate:e.ccExpMonth,cardExpDateYear:e.ccExpYear,cardCVV:e.ccCVV}}})))),[e])})({formData:l,onPaymentProcessing:s}),(({formData:e,onCheckoutValidationBeforeProcessing:t},a)=>{(0,r.useEffect)((()=>t((()=>0==e.dirty?(i({...e,dirty:!0}),{errorMessage:"Please fill in Pay by Card 3D secured section before placing your order."}):!(Object.keys(a).length>0)||{errorMessage:"Please check Pay by Card 3D secured section before placing your order."}))),[e])})({formData:l,onCheckoutValidationBeforeProcessing:m},n);const p=e=>"ccNo"==e&&l[e].replaceAll(" ","").length<16&&1==l.dirty||"ccCVV"==e&&l[e].length<3&&1==l.dirty||""==l[e]&&1==l.dirty?"has-error":"",u=(e,t)=>""==l[e]&&1==l.dirty?(n[e]=t,E(t)):"",E=t=>(0,e.createElement)("div",{class:"wc-block-components-validation-error",role:"alert"},(0,e.createElement)("p",null,t)),y=e=>{for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),a=t&&t[0]||"",c=[],r=0,n=a.length;r<n;r+=4)c.push(a.substring(r,r+4));return c.length?c.join(" "):e},h=e=>t=>{"ccNo"==e?/^[0-9]*$/.test(t.target.value)&&i({...l,[e]:y(t.target.value),dirty:!0}):i("ccName"==e?{...l,[e]:t.target.value.toUpperCase(),dirty:!0}:{...l,[e]:t.target.value,dirty:!0})};return(0,e.createElement)("div",{className:"wc-block-components-credit-card-form"},(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccNo")}`},(0,e.createElement)("input",{type:"text",value:l.ccNo,onChange:h("ccNo"),id:"txtCardNumber",name:"cardNumber",required:"validateCardNumber()",onKeyDown:e=>/^[0-9]*$/.test(e.key)||[8,67,86,88].includes(e.keyCode)?l.ccNo.replaceAll(" ","").length>=16&&![8,67,86,88].includes(e.keyCode)?e.preventDefault():void 0:e.preventDefault(),placeholder:"0000 0000 0000 0000"}),(0,e.createElement)("label",{for:"creditCard"},"Card Number *"),u("ccNo","Please fill in Card Number"),(g="Please check your Card Number",l[C="ccNo"].replaceAll(" ","").length<16&&l[C].replaceAll(" ","").length>0&&1==l.dirty?(n[C]=g,E(g)):"")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccName")}`},(0,e.createElement)("input",{type:"text",value:l.ccName,onChange:h("ccName"),id:"txtHolder",name:"cardHolder",required:"validateCardHolder()",keypress:"checkCardName",placeholder:"TONY ELSDEN"}),(0,e.createElement)("label",{for:"cardHolder"},"Card Holder *"),u("ccName","Please fill in Card Holder")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${p("ccExpMonth")}`},(0,e.createElement)("select",{value:l.ccExpMonth,onChange:h("ccExpMonth"),id:"txtExpDate",name:"cardExpDate",required:"validateCardExpDate()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),o.map((t=>(0,e.createElement)("option",{value:t,disabled:t<(a.cardYear===a.minCardYear?(new Date).getMonth()+1:1)},t<10?"0"+t:t)))),(0,e.createElement)("label",{for:"ccExpMonth"},"Exp Month *"),u("ccExpMonth","Please fill in Exp Month")),(0,e.createElement)("div",{className:`wc-block-components-text-input is-active ${p("ccExpYear")}`},(0,e.createElement)("select",{value:l.ccExpYear,onChange:h("ccExpYear"),id:"ccExpYear",name:"cardExpDateYear",required:"validateCardExpYear()"},(0,e.createElement)("option",{value:"",disabled:!0,selected:!0},"Month"),o.map(((t,a)=>(0,e.createElement)("option",{value:a+l.minCardYear},a+l.minCardYear)))),(0,e.createElement)("label",{for:"ccExpYear"},"Exp Year *"),u("ccExpYear","Please fill in Card Exp Year")),(0,e.createElement)("div",{className:`wc-block-components-text-input wc-block-components-credit-form is-active ${p("ccCVV")}`},(0,e.createElement)("input",{type:"password",value:l.ccCVV,onChange:h("ccCVV"),id:"txtCVV",name:"cardCVV",maxLength:3,onKeyDown:e=>{if(!/^[0-9]*$/.test(e.key)&&![8,67,86,88].includes(e.keyCode))return e.preventDefault()},placeholder:"000",required:!(0!=l.ccCVV.length||!c)}),(0,e.createElement)("label",{for:"cardCVV"},"CVV *"),u("ccCVV","Please fill in CVV"),((e,t)=>l[e].length<3&&l[e].length>0&&1==l.dirty?(n[e]=t,E(t)):"")("ccCVV","Please check CVV")));var C,g}),o="moneyspace",l=(0,t.getSetting)(`${o}_data`,{}),i=(0,a.decodeEntities)(l.title),d=l.ms_template_payment,s=()=>(0,a.decodeEntities)(l.description||""),m={name:o,label:(0,e.createElement)((({components:t,title:a,icons:c,id:r})=>{Array.isArray(c)||(c=[c]);const{PaymentMethodLabel:n,PaymentMethodIcons:o}=t;return(0,e.createElement)("div",{className:`wc-moneyspace-blocks-payment-method__label ${r}`},(0,e.createElement)(n,{text:a}),(0,e.createElement)(o,{icons:c}))}),{id:o,title:i,icons:l.icons}),content:1==d?(0,e.createElement)(n,null):(0,e.createElement)(s,null),edit:(0,e.createElement)(s,null),ariaLabel:i,paymentMethodId:o,canMakePayment:()=>!0,supports:{features:l.supports}};(0,c.registerPaymentMethod)(m)})();